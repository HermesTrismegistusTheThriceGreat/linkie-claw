# Linkie Claw

**AI-powered LinkedIn content studio** -- generate, preview, schedule, and publish LinkedIn posts from a single local-first application.

## Features

- **AI text generation** -- Enter a content idea and get 6 distinct post variations generated by Claude, each with a different tone and style
- **AI image generation** -- Automatically generate accompanying visuals using Google Gemini or Replicate FLUX Schnell
- **LinkedIn post preview** -- See exactly how your post will look on LinkedIn before publishing, with a live mockup that updates as you edit
- **Smart scheduling** -- Pick a date and time, and your post is queued for automatic publishing
- **Calendar view** -- Monthly grid showing all scheduled, draft, and published posts at a glance
- **Dashboard** -- Stats overview, recent drafts, weekly planner, and AI-powered content inspiration
- **LinkedIn publishing** -- Automated posting to LinkedIn via n8n workflow webhooks
- **Local-first architecture** -- SQLite database and local file storage. No cloud database dependencies

## Tech Stack

| Layer | Technologies |
|-------|-------------|
| Frontend | Next.js 15, React 19, TypeScript 5, Tailwind CSS 4, Shadcn UI, Sonner |
| Backend | SQLite + Drizzle ORM, Zod validation, Next.js API routes |
| AI (Text) | Anthropic Claude (`claude-sonnet-4-20250514`) |
| AI (Images) | Google Gemini Flash (default), Replicate FLUX Schnell (alternative) |
| Scheduling | FastAPI + APScheduler (Python), PostgreSQL job store |
| Publishing | n8n workflow automation, LinkedIn API (OAuth 2.0) |
| Infrastructure | Docker Compose (scheduler + PostgreSQL + n8n) |

## Getting Started

### Prerequisites

- Node.js 18+
- npm

### Installation

```bash
git clone <repository-url> linkie-claw
cd linkie-claw
npm install
```

### Environment Setup

Copy the example environment file and fill in your API keys:

```bash
cp .env.example .env
```

Required variables:

| Variable | Description |
|----------|-------------|
| `ANTHROPIC_API_KEY` | Anthropic API key for Claude text generation |
| `GOOGLE_GEMINI_API_KEY` | Google Gemini API key for image generation |
| `N8N_WEBHOOK_URL` | n8n webhook endpoint for LinkedIn publishing |
| `DATABASE_URL` | SQLite database path (defaults to `file:./local.db`) |

### Database Setup

Push the schema to create the local SQLite database:

```bash
npm run db:push
```

### Run the Development Server

```bash
npm run dev
```

The application will be available at [http://localhost:3000](http://localhost:3000).

**Routes:**

| Path | Page |
|------|------|
| `/` | Dashboard -- stats, recent drafts, planner, AI inspiration |
| `/calendar` | Calendar -- monthly grid view of all posts |
| `/create` | Post Writer -- AI generation, preview, and scheduling |

## Scheduler Service (Optional)

The scheduler service is a standalone FastAPI application that handles timed post publishing. It uses APScheduler with a PostgreSQL job store to ensure scheduled posts are published reliably, even across restarts.

### Running with Docker Compose

From the `scheduler/` directory:

```bash
cd scheduler
docker compose up -d
```

This starts three services:

| Service | Port | Purpose |
|---------|------|---------|
| `scheduler` | 8000 | FastAPI scheduler with APScheduler |
| `postgres` | 5433 | PostgreSQL for persistent job storage |
| `n8n` | 5678 | Workflow automation for LinkedIn publishing |

Copy and configure the scheduler environment:

```bash
cp scheduler/.env.example scheduler/.env
```

## n8n Integration (Optional)

The n8n workflow handles the LinkedIn OAuth flow and post publishing. To set it up:

1. Start n8n via Docker Compose (included in `scheduler/docker-compose.yml`)
2. Open the n8n editor at [http://localhost:5678](http://localhost:5678)
3. Import the workflow from `n8n/workflows/linkedin-publish.json`
4. Configure your LinkedIn OAuth2 credentials in n8n
5. Activate the workflow

The workflow receives webhook calls from the scheduler, authenticates with LinkedIn, and publishes posts (with optional image uploads) via the LinkedIn API.

## Available Scripts

| Command | Description |
|---------|-------------|
| `npm run dev` | Start the Next.js development server |
| `npm run build` | Create a production build |
| `npm run start` | Start the production server |
| `npm run lint` | Run ESLint |
| `npm run lint:fix` | Run ESLint with auto-fix |
| `npm run typecheck` | Run TypeScript type checking |
| `npm run db:generate` | Generate Drizzle ORM migrations |
| `npm run db:push` | Push schema directly to the database |
| `npm run db:migrate` | Run pending migrations |
| `npm run db:studio` | Open Drizzle Studio (database GUI) |
| `npm run db:seed` | Seed the database with sample data |

## Project Structure

```
src/
  app/
    page.tsx                  # Dashboard
    calendar/page.tsx         # Calendar view
    create/page.tsx           # Post writer / AI studio
    api/
      generate/text/          # AI text generation endpoint
      generate/image/         # AI image generation endpoint
      posts/                  # Posts CRUD + scheduling
      webhooks/               # Publish status callbacks
  components/
    dashboard/                # Dashboard widgets and cards
    calendar/                 # Calendar grid and day cells
    studio/                   # Post writer components
    layout/                   # Sidebar, aurora background
    ui/                       # Shadcn UI primitives
  lib/
    api/                      # AI provider clients (Anthropic, Gemini, Replicate)
    db/                       # Drizzle schema, client, queries
    validations/              # Zod request schemas
  types/                      # Shared TypeScript types
drizzle/                      # Generated database migrations
scheduler/                    # FastAPI scheduling service (Python)
  app/
    main.py                   # FastAPI application entry point
    scheduler.py              # APScheduler configuration
    jobs.py                   # Scheduled job definitions
    routes/                   # API route handlers
  docker-compose.yml          # Scheduler + PostgreSQL + n8n
n8n/
  workflows/                  # Exportable n8n workflow definitions
```

## License

MIT
